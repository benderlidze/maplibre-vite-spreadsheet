const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-Bd9rX0we.js","assets/index-Vs-pDNT5.js","assets/index-BSTGOWiF.css"])))=>i.map(i=>d[i]);
import{r as d,_ as Pe,a as De,g as Fe}from"./index-Vs-pDNT5.js";const ze=d.createContext(null);function Ne(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,s=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return n===s&&o===a}function J(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!J(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(const s of n)if(!t.hasOwnProperty(s)||!J(e[s],t[s]))return!1;return!0}return!1}function be(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Re(e,t){const n=t.viewState||t,o={};if("longitude"in n&&"latitude"in n&&(n.longitude!==e.center.lng||n.latitude!==e.center.lat)){const s=e.center.constructor;o.center=new s(n.longitude,n.latitude)}return"zoom"in n&&n.zoom!==e.zoom&&(o.zoom=n.zoom),"bearing"in n&&n.bearing!==e.bearing&&(o.bearing=n.bearing),"pitch"in n&&n.pitch!==e.pitch&&(o.pitch=n.pitch),n.padding&&e.padding&&!J(n.padding,e.padding)&&(o.padding=n.padding),o}const Ue=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Le(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const o of e.layers)t[o.id]=o;const n=e.layers.map(o=>{let s=null;"interactive"in o&&(s=Object.assign({},o),delete s.interactive);const a=t[o.ref];if(a){s=s||Object.assign({},o),delete s.ref;for(const u of Ue)u in a&&(s[u]=a[u])}return s||o});return{...e,layers:n}}const xe={version:8,sources:{},layers:[]},Me={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Oe={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Te={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},je=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],qe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ge{constructor(t,n,o){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=s=>{const a=this.props[Te[s.type]];a?a(s):s.type==="error"&&console.error(s.error)},this._onCameraEvent=s=>{if(this._internalUpdate)return;s.viewState=this._propsedCameraUpdate||be(this._map.transform);const a=this.props[Oe[s.type]];a&&a(s)},this._onCameraUpdate=s=>this._internalUpdate?s:(this._propsedCameraUpdate=be(s),Re(s,this.props)),this._onPointerEvent=s=>{(s.type==="mousemove"||s.type==="mouseout")&&this._updateHover(s);const a=this.props[Me[s.type]];a&&(this.props.interactiveLayerIds&&s.type!=="mouseover"&&s.type!=="mouseout"&&(s.features=this._hoveredFeatures||this._queryRenderedFeatures(s.point)),a(s),delete s.features)},this._MapClass=t,this.props=n,this._initialize(o)}get map(){return this._map}setProps(t){const n=this.props;this.props=t;const o=this._updateSettings(t,n),s=this._updateSize(t),a=this._updateViewState(t);this._updateStyle(t,n),this._updateStyleComponents(t),this._updateHandlers(t,n),(o||s||a&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const o=ge.savedMaps.pop();if(!o)return null;const s=o.map,a=s.getContainer();for(n.className=a.className;a.childNodes.length>0;)n.appendChild(a.childNodes[0]);s._container=n;const u=s._resizeObserver;u&&(u.disconnect(),u.observe(n)),o.setProps({...t,styleDiffing:!1}),s.resize();const{initialViewState:f}=t;return f&&(f.bounds?s.fitBounds(f.bounds,{...f.fitBoundsOptions,duration:0}):o._updateViewState(f)),s.isStyleLoaded()?s.fire("load"):s.once("style.load",()=>s.fire("load")),s._update(),o}_initialize(t){const{props:n}=this,{mapStyle:o=xe}=n,s={...n,...n.initialViewState,container:t,style:Le(o)},a=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[a.longitude||0,a.latitude||0],zoom:a.zoom||0,pitch:a.pitch||0,bearing:a.bearing||0}),n.gl){const f=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=f,n.gl)}const u=new this._MapClass(s);a.padding&&u.setPadding(a.padding),n.cursor&&(u.getCanvas().style.cursor=n.cursor),u.transformCameraUpdate=this._onCameraUpdate,u.on("style.load",()=>{var f;this._styleComponents={light:u.getLight(),sky:u.getSky(),projection:(f=u.getProjection)==null?void 0:f.call(u),terrain:u.getTerrain()},this._updateStyleComponents(this.props)}),u.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const f in Me)u.on(f,this._onPointerEvent);for(const f in Oe)u.on(f,this._onCameraEvent);for(const f in Te)u.on(f,this._onEvent);this._map=u}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),ge.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:n}=t;if(n){const o=this._map;if(n.width!==o.transform.width||n.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t){const n=this._map,o=n.transform;if(!n.isMoving()){const a=Re(o,t);if(Object.keys(a).length>0)return this._internalUpdate=!0,n.jumpTo(a),this._internalUpdate=!1,!0}return!1}_updateSettings(t,n){const o=this._map;let s=!1;for(const a of je)if(a in t&&!J(t[a],n[a])){s=!0;const u=o[`set${a[0].toUpperCase()}${a.slice(1)}`];u==null||u.call(o,t[a])}return s}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==n.mapStyle){const{mapStyle:o=xe,styleDiffing:s=!0}=t,a={diff:s};"localIdeographFontFamily"in t&&(a.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Le(o),a)}}_updateStyleComponents({light:t,projection:n,sky:o,terrain:s}){var f,h;const a=this._map,u=this._styleComponents;a.style._loaded&&(t&&!J(t,u.light)&&(u.light=t,a.setLight(t)),n&&!J(n,u.projection)&&n!==((f=u.projection)==null?void 0:f.type)&&(u.projection=typeof n=="string"?{type:n}:n,(h=a.setProjection)==null||h.call(a,u.projection)),o&&!J(o,u.sky)&&(u.sky=o,a.setSky(o)),s!==void 0&&!J(s,u.terrain)&&(!s||a.getSource(s.source))&&(u.terrain=s,a.setTerrain(s)))}_updateHandlers(t,n){const o=this._map;for(const s of qe){const a=t[s]??!0,u=n[s]??!0;J(a,u)||(a?o[s].enable(a):o[s].disable())}}_queryRenderedFeatures(t){const n=this._map,{interactiveLayerIds:o=[]}=this.props;try{return n.queryRenderedFeatures(t,{layers:o.filter(n.getLayer.bind(n))})}catch{return[]}}_updateHover(t){var s;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const a=t.type,u=((s=this._hoveredFeatures)==null?void 0:s.length)>0,f=this._queryRenderedFeatures(t.point),h=f.length>0;!h&&u&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=f,h&&!u&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=a}else this._hoveredFeatures=null}}ge.savedMaps=[];const He=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function We(e){if(!e)return null;const t=e.map,n={getMap:()=>t};for(const o of Be(t))!(o in n)&&!He.includes(o)&&(n[o]=t[o].bind(t));return n}function Be(e){const t=new Set;let n=e;for(;n;){for(const o of Object.getOwnPropertyNames(n))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);n=Object.getPrototypeOf(n)}return Array.from(t)}const Ze=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Ke(e,t){const{RTLTextPlugin:n,maxParallelImageRequests:o,workerCount:s,workerUrl:a}=t;if(n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:u,lazy:f=!0}=typeof n=="string"?{pluginUrl:n}:n;e.setRTLTextPlugin(u,h=>{h&&console.error(h)},f)}o!==void 0&&e.setMaxParallelImageRequests(o),s!==void 0&&e.setWorkerCount(s),a!==void 0&&e.setWorkerUrl(a)}const me=d.createContext(null);function Ve(e,t){const n=d.useContext(ze),[o,s]=d.useState(null),a=d.useRef(),{current:u}=d.useRef({mapLib:null,map:null});d.useEffect(()=>{const c=e.mapLib;let x=!0,w;return Promise.resolve(c||Pe(()=>import("./maplibre-gl-Bd9rX0we.js").then(H=>H.m),__vite__mapDeps([0,1,2]))).then(H=>{if(!x)return;if(!H)throw new Error("Invalid mapLib");const j="Map"in H?H:H.default;if(!j.Map)throw new Error("Invalid mapLib");if(Ke(j,e),!j.supported||j.supported(e))e.reuseMaps&&(w=ge.reuse(e,a.current)),w||(w=new ge(j.Map,e,a.current)),u.map=We(w),u.mapLib=j,s(w),n==null||n.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(H=>{const{onError:j}=e;j?j({type:"error",target:null,originalEvent:null,error:H}):console.error(H)}),()=>{x=!1,w&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?w.recycle():w.destroy())}},[]),Ze(()=>{o&&o.setProps(e)}),d.useImperativeHandle(t,()=>u.map,[o]);const f=d.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),h={height:"100%"};return d.createElement("div",{id:e.id,ref:a,style:f},o&&d.createElement(me.Provider,{value:u},d.createElement("div",{"mapboxgl-children":"",style:h},e.children)))}const ht=d.forwardRef(Ve),$e=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ae(e,t){if(!e||!t)return;const n=e.style;for(const o in t){const s=t[o];Number.isFinite(s)&&!$e.test(o)?n[o]=`${s}px`:n[o]=s}}d.memo(d.forwardRef((e,t)=>{const{map:n,mapLib:o}=d.useContext(me),s=d.useRef({props:e});s.current.props=e;const a=d.useMemo(()=>{let ye=!1;d.Children.forEach(e.children,te=>{te&&(ye=!0)});const fe={...e,element:ye?document.createElement("div"):null},ee=new o.Marker(fe);return ee.setLngLat([e.longitude,e.latitude]),ee.getElement().addEventListener("click",te=>{var K,V;(V=(K=s.current.props).onClick)==null||V.call(K,{type:"click",target:ee,originalEvent:te})}),ee.on("dragstart",te=>{var V,G;const K=te;K.lngLat=a.getLngLat(),(G=(V=s.current.props).onDragStart)==null||G.call(V,K)}),ee.on("drag",te=>{var V,G;const K=te;K.lngLat=a.getLngLat(),(G=(V=s.current.props).onDrag)==null||G.call(V,K)}),ee.on("dragend",te=>{var V,G;const K=te;K.lngLat=a.getLngLat(),(G=(V=s.current.props).onDragEnd)==null||G.call(V,K)}),ee},[]);d.useEffect(()=>(a.addTo(n.getMap()),()=>{a.remove()}),[]);const{longitude:u,latitude:f,offset:h,style:c,draggable:x=!1,popup:w=null,rotation:H=0,rotationAlignment:j="auto",pitchAlignment:ce="auto"}=e;return d.useEffect(()=>{ae(a.getElement(),c)},[c]),d.useImperativeHandle(t,()=>a,[]),(a.getLngLat().lng!==u||a.getLngLat().lat!==f)&&a.setLngLat([u,f]),h&&!Ne(a.getOffset(),h)&&a.setOffset(h),a.isDraggable()!==x&&a.setDraggable(x),a.getRotation()!==H&&a.setRotation(H),a.getRotationAlignment()!==j&&a.setRotationAlignment(j),a.getPitchAlignment()!==ce&&a.setPitchAlignment(ce),a.getPopup()!==w&&a.setPopup(w),De.createPortal(e.children,a.getElement())}));function Ie(e){return new Set(e?e.trim().split(/\s+/):[])}const pt=d.memo(d.forwardRef((e,t)=>{const{map:n,mapLib:o}=d.useContext(me),s=d.useMemo(()=>document.createElement("div"),[]),a=d.useRef({props:e});a.current.props=e;const u=d.useMemo(()=>{const f={...e},h=new o.Popup(f);return h.setLngLat([e.longitude,e.latitude]),h.once("open",c=>{var x,w;(w=(x=a.current.props).onOpen)==null||w.call(x,c)}),h},[]);if(d.useEffect(()=>{const f=h=>{var c,x;(x=(c=a.current.props).onClose)==null||x.call(c,h)};return u.on("close",f),u.setDOMContent(s).addTo(n.getMap()),()=>{u.off("close",f),u.isOpen()&&u.remove()}},[]),d.useEffect(()=>{ae(u.getElement(),e.style)},[e.style]),d.useImperativeHandle(t,()=>u,[]),u.isOpen()&&((u.getLngLat().lng!==e.longitude||u.getLngLat().lat!==e.latitude)&&u.setLngLat([e.longitude,e.latitude]),e.offset&&!J(u.options.offset,e.offset)&&u.setOffset(e.offset),(u.options.anchor!==e.anchor||u.options.maxWidth!==e.maxWidth)&&(u.options.anchor=e.anchor,u.setMaxWidth(e.maxWidth)),u.options.className!==e.className)){const f=Ie(u.options.className),h=Ie(e.className);for(const c of f)h.has(c)||u.removeClassName(c);for(const c of h)f.has(c)||u.addClassName(c);u.options.className=e.className}return De.createPortal(e.children,s)}));function de(e,t,n,o){const s=d.useContext(me),a=d.useMemo(()=>e(s),[]);return d.useEffect(()=>{const u=t,f=null,h=typeof t=="function"?t:null,{map:c}=s;return c.hasControl(a)||(c.addControl(a,u==null?void 0:u.position),f&&f(s)),()=>{h&&h(s),c.hasControl(a)&&c.removeControl(a)}},[]),a}function Je(e){const t=de(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return d.useEffect(()=>{ae(t._container,e.style)},[e.style]),null}d.memo(Je);function Ge(e){const t=de(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return d.useEffect(()=>{ae(t._controlContainer,e.style)},[e.style]),null}d.memo(Ge);function Qe(e,t){const n=d.useRef({props:e}),o=de(({mapLib:s})=>{const a=new s.GeolocateControl(e),u=a._setupUI;return a._setupUI=()=>{a._container.hasChildNodes()||u()},a.on("geolocate",f=>{var h,c;(c=(h=n.current.props).onGeolocate)==null||c.call(h,f)}),a.on("error",f=>{var h,c;(c=(h=n.current.props).onError)==null||c.call(h,f)}),a.on("outofmaxbounds",f=>{var h,c;(c=(h=n.current.props).onOutOfMaxBounds)==null||c.call(h,f)}),a.on("trackuserlocationstart",f=>{var h,c;(c=(h=n.current.props).onTrackUserLocationStart)==null||c.call(h,f)}),a.on("trackuserlocationend",f=>{var h,c;(c=(h=n.current.props).onTrackUserLocationEnd)==null||c.call(h,f)}),a},{position:e.position});return n.current.props=e,d.useImperativeHandle(t,()=>o,[]),d.useEffect(()=>{ae(o._container,e.style)},[e.style]),null}d.memo(d.forwardRef(Qe));function Ye(e){const t=de(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return d.useEffect(()=>{ae(t._container,e.style)},[e.style]),null}const gt=d.memo(Ye);function Xe(e){const t=de(({mapLib:a})=>new a.ScaleControl(e),{position:e.position}),n=d.useRef(e),o=n.current;n.current=e;const{style:s}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&t.setUnit(e.unit),d.useEffect(()=>{ae(t._container,s)},[s]),null}d.memo(Xe);function et(e){const t=de(({mapLib:n})=>new n.TerrainControl(e),{position:e.position});return d.useEffect(()=>{ae(t._container,e.style)},[e.style]),null}d.memo(et);function tt(e){const t=de(({mapLib:n})=>new n.LogoControl(e),{position:e.position});return d.useEffect(()=>{ae(t._container,e.style)},[e.style]),null}d.memo(tt);function Ce(e,t){if(!e)throw new Error(t)}let nt=0;function rt(e,t,n){if(e.style&&e.style._loaded){const o={...n};return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}function it(e,t,n){var u,f,h;Ce(t.id===n.id,"source id changed"),Ce(t.type===n.type,"source type changed");let o="",s=0;for(const c in t)c!=="children"&&c!=="id"&&!J(n[c],t[c])&&(o=c,s++);if(!s)return;const a=t.type;if(a==="geojson")e.setData(t.data);else if(a==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else switch(o){case"coordinates":(u=e.setCoordinates)==null||u.call(e,t.coordinates);break;case"url":(f=e.setUrl)==null||f.call(e,t.url);break;case"tiles":(h=e.setTiles)==null||h.call(e,t.tiles);break;default:console.warn(`Unable to update <Source> prop: ${o}`)}}function mt(e){const t=d.useContext(me).map.getMap(),n=d.useRef(e),[,o]=d.useState(0),s=d.useMemo(()=>e.id||`jsx-source-${nt++}`,[]);d.useEffect(()=>{if(t){const u=()=>setTimeout(()=>o(f=>f+1),0);return t.on("styledata",u),u(),()=>{var f;if(t.off("styledata",u),t.style&&t.style._loaded&&t.getSource(s)){const h=(f=t.getStyle())==null?void 0:f.layers;if(h)for(const c of h)c.source===s&&t.removeLayer(c.id);t.removeSource(s)}}}},[t]);let a=t&&t.style&&t.getSource(s);return a?it(a,e,n.current):a=rt(t,s,e),n.current=e,a&&d.Children.map(e.children,u=>u&&d.cloneElement(u,{source:s}))||null}function ot(e,t,n,o){if(Ce(n.id===o.id,"layer id changed"),Ce(n.type===o.type,"layer type changed"),n.type==="custom"||o.type==="custom")return;const{layout:s={},paint:a={},filter:u,minzoom:f,maxzoom:h,beforeId:c}=n;if(c!==o.beforeId&&e.moveLayer(t,c),s!==o.layout){const x=o.layout||{};for(const w in s)J(s[w],x[w])||e.setLayoutProperty(t,w,s[w]);for(const w in x)s.hasOwnProperty(w)||e.setLayoutProperty(t,w,void 0)}if(a!==o.paint){const x=o.paint||{};for(const w in a)J(a[w],x[w])||e.setPaintProperty(t,w,a[w]);for(const w in x)a.hasOwnProperty(w)||e.setPaintProperty(t,w,void 0)}J(u,o.filter)||e.setFilter(t,u),(f!==o.minzoom||h!==o.maxzoom)&&e.setLayerZoomRange(t,f,h)}function st(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const o={...n,id:t};delete o.beforeId,e.addLayer(o,n.beforeId)}}let at=0;function yt(e){const t=d.useContext(me).map.getMap(),n=d.useRef(e),[,o]=d.useState(0),s=d.useMemo(()=>e.id||`jsx-layer-${at++}`,[]);if(d.useEffect(()=>{if(t){const u=()=>o(f=>f+1);return t.on("styledata",u),u(),()=>{t.off("styledata",u),t.style&&t.style._loaded&&t.getLayer(s)&&t.removeLayer(s)}}},[t]),t&&t.style&&t.getLayer(s))try{ot(t,s,e,n.current)}catch(u){console.warn(u)}else st(t,s,e);return n.current=e,null}const _t={Dark:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",Light:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",Voyager:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",Contrast:"https://demotiles.maplibre.org/style.json"};var Ee={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var ut=Ee.exports,Ae;function lt(){return Ae||(Ae=1,function(e,t){((n,o)=>{e.exports=o()})(ut,function n(){var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},s,a=!o.document&&!!o.postMessage,u=o.IS_PAPA_WORKER||!1,f={},h=0,c={};function x(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(i){var l=G(i);l.chunkSize=parseInt(l.chunkSize),i.step||i.chunk||(l.chunkSize=null),this._handle=new ye(l),(this._handle.streamer=this)._config=l}).call(this,r),this.parseChunk=function(i,l){var g=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<g){let C=this._config.newline;C||(p=this._config.quoteChar||'"',C=this._handle.guessLineEndings(i,p)),i=[...i.split(C).slice(g)].join(C)}this.isFirstChunk&&O(this._config.beforeFirstChunk)&&(p=this._config.beforeFirstChunk(i))!==void 0&&(i=p),this.isFirstChunk=!1,this._halted=!1;var g=this._partialLine+i,p=(this._partialLine="",this._handle.parse(g,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(i=p.meta.cursor,g=(this._finished||(this._partialLine=g.substring(i-this._baseIndex),this._baseIndex=i),p&&p.data&&(this._rowCount+=p.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)o.postMessage({results:p,workerId:c.WORKER_ID,finished:g});else if(O(this._config.chunk)&&!l){if(this._config.chunk(p,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=p=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(p.data),this._completeResults.errors=this._completeResults.errors.concat(p.errors),this._completeResults.meta=p.meta),this._completed||!g||!O(this._config.complete)||p&&p.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),g||p&&p.meta.paused||this._nextChunk(),p}this._halted=!0},this._sendError=function(i){O(this._config.error)?this._config.error(i):u&&this._config.error&&o.postMessage({workerId:c.WORKER_ID,error:i,finished:!1})}}function w(r){var i;(r=r||{}).chunkSize||(r.chunkSize=c.RemoteChunkSize),x.call(this,r),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(l){this._input=l,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),a||(i.onload=ue(this._chunkLoaded,this),i.onerror=ue(this._chunkError,this)),i.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var l,g=this._config.downloadRequestHeaders;for(l in g)i.setRequestHeader(l,g[l])}var p;this._config.chunkSize&&(p=this._start+this._config.chunkSize-1,i.setRequestHeader("Range","bytes="+this._start+"-"+p));try{i.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}a&&i.status===0&&this._chunkError()}},this._chunkLoaded=function(){i.readyState===4&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize||i.responseText.length,this._finished=!this._config.chunkSize||this._start>=(l=>(l=l.getResponseHeader("Content-Range"))!==null?parseInt(l.substring(l.lastIndexOf("/")+1)):-1)(i),this.parseChunk(i.responseText)))},this._chunkError=function(l){l=i.statusText||l,this._sendError(new Error(l))}}function H(r){(r=r||{}).chunkSize||(r.chunkSize=c.LocalChunkSize),x.call(this,r);var i,l,g=typeof FileReader<"u";this.stream=function(p){this._input=p,l=p.slice||p.webkitSlice||p.mozSlice,g?((i=new FileReader).onload=ue(this._chunkLoaded,this),i.onerror=ue(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var p=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),p=l.call(p,this._start,C)),i.readAsText(p,this._config.encoding));g||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(p){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(p.target.result)},this._chunkError=function(){this._sendError(i.error)}}function j(r){var i;x.call(this,r=r||{}),this.stream=function(l){return i=l,this._nextChunk()},this._nextChunk=function(){var l,g;if(!this._finished)return l=this._config.chunkSize,i=l?(g=i.substring(0,l),i.substring(l)):(g=i,""),this._finished=!i,this.parseChunk(g)}}function ce(r){x.call(this,r=r||{});var i=[],l=!0,g=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(p){this._input=p,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){g&&i.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):l=!0},this._streamData=ue(function(p){try{i.push(typeof p=="string"?p:p.toString(this._config.encoding)),l&&(l=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(C){this._streamError(C)}},this),this._streamError=ue(function(p){this._streamCleanUp(),this._sendError(p)},this),this._streamEnd=ue(function(){this._streamCleanUp(),g=!0,this._streamData("")},this),this._streamCleanUp=ue(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ye(r){var i,l,g,p,C=Math.pow(2,53),z=-C,Q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Y=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,k=this,A=0,y=0,B=!1,v=!1,S=[],m={data:[],errors:[],meta:{}};function N(b){return r.skipEmptyLines==="greedy"?b.join("").trim()==="":b.length===1&&b[0].length===0}function F(){if(m&&g&&(X("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),g=!1),r.skipEmptyLines&&(m.data=m.data.filter(function(_){return!N(_)})),W()){let _=function(P,U){O(r.transformHeader)&&(P=r.transformHeader(P,U)),S.push(P)};if(m)if(Array.isArray(m.data[0])){for(var b=0;W()&&b<m.data.length;b++)m.data[b].forEach(_);m.data.splice(0,1)}else m.data.forEach(_)}function L(_,P){for(var U=r.header?{}:[],M=0;M<_.length;M++){var T=M,R=_[M],R=((ne,E)=>(I=>(r.dynamicTypingFunction&&r.dynamicTyping[I]===void 0&&(r.dynamicTyping[I]=r.dynamicTypingFunction(I)),(r.dynamicTyping[I]||r.dynamicTyping)===!0))(ne)?E==="true"||E==="TRUE"||E!=="false"&&E!=="FALSE"&&((I=>{if(Q.test(I)&&(I=parseFloat(I),z<I&&I<C))return 1})(E)?parseFloat(E):Y.test(E)?new Date(E):E===""?null:E):E)(T=r.header?M>=S.length?"__parsed_extra":S[M]:T,R=r.transform?r.transform(R,T):R);T==="__parsed_extra"?(U[T]=U[T]||[],U[T].push(R)):U[T]=R}return r.header&&(M>S.length?X("FieldMismatch","TooManyFields","Too many fields: expected "+S.length+" fields but parsed "+M,y+P):M<S.length&&X("FieldMismatch","TooFewFields","Too few fields: expected "+S.length+" fields but parsed "+M,y+P)),U}var D;m&&(r.header||r.dynamicTyping||r.transform)&&(D=1,!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(L),D=m.data.length):m.data=L(m.data,0),r.header&&m.meta&&(m.meta.fields=S),y+=D)}function W(){return r.header&&S.length===0}function X(b,L,D,_){b={type:b,code:L,message:D},_!==void 0&&(b.row=_),m.errors.push(b)}O(r.step)&&(p=r.step,r.step=function(b){m=b,W()?F():(F(),m.data.length!==0&&(A+=b.data.length,r.preview&&A>r.preview?l.abort():(m.data=m.data[0],p(m,k))))}),this.parse=function(b,L,D){var _=r.quoteChar||'"',_=(r.newline||(r.newline=this.guessLineEndings(b,_)),g=!1,r.delimiter?O(r.delimiter)&&(r.delimiter=r.delimiter(b),m.meta.delimiter=r.delimiter):((_=((P,U,M,T,R)=>{var ne,E,I,le;R=R||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var he=0;he<R.length;he++){for(var re,_e=R[he],Z=0,ie=0,q=0,$=(I=void 0,new ee({comments:T,delimiter:_e,newline:U,preview:10}).parse(P)),se=0;se<$.data.length;se++)M&&N($.data[se])?q++:(re=$.data[se].length,ie+=re,I===void 0?I=re:0<re&&(Z+=Math.abs(re-I),I=re));0<$.data.length&&(ie/=$.data.length-q),(E===void 0||Z<=E)&&(le===void 0||le<ie)&&1.99<ie&&(E=Z,ne=_e,le=ie)}return{successful:!!(r.delimiter=ne),bestDelimiter:ne}})(b,r.newline,r.skipEmptyLines,r.comments,r.delimitersToGuess)).successful?r.delimiter=_.bestDelimiter:(g=!0,r.delimiter=c.DefaultDelimiter),m.meta.delimiter=r.delimiter),G(r));return r.preview&&r.header&&_.preview++,i=b,l=new ee(_),m=l.parse(i,L,D),F(),B?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return B},this.pause=function(){B=!0,l.abort(),i=O(r.chunk)?"":i.substring(l.getCharIndex())},this.resume=function(){k.streamer._halted?(B=!1,k.streamer.parseChunk(i,!0)):setTimeout(k.resume,3)},this.aborted=function(){return v},this.abort=function(){v=!0,l.abort(),m.meta.aborted=!0,O(r.complete)&&r.complete(m),i=""},this.guessLineEndings=function(P,_){P=P.substring(0,1048576);var _=new RegExp(fe(_)+"([^]*?)"+fe(_),"gm"),D=(P=P.replace(_,"")).split("\r"),_=P.split(`
`),P=1<_.length&&_[0].length<D[0].length;if(D.length===1||P)return`
`;for(var U=0,M=0;M<D.length;M++)D[M][0]===`
`&&U++;return U>=D.length/2?`\r
`:"\r"}}function fe(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(r){var i=(r=r||{}).delimiter,l=r.newline,g=r.comments,p=r.step,C=r.preview,z=r.fastMode,Q=null,Y=!1,k=r.quoteChar==null?'"':r.quoteChar,A=k;if(r.escapeChar!==void 0&&(A=r.escapeChar),(typeof i!="string"||-1<c.BAD_DELIMITERS.indexOf(i))&&(i=","),g===i)throw new Error("Comment character same as delimiter");g===!0?g="#":(typeof g!="string"||-1<c.BAD_DELIMITERS.indexOf(g))&&(g=!1),l!==`
`&&l!=="\r"&&l!==`\r
`&&(l=`
`);var y=0,B=!1;this.parse=function(v,S,m){if(typeof v!="string")throw new Error("Input must be a string");var N=v.length,F=i.length,W=l.length,X=g.length,b=O(p),L=[],D=[],_=[],P=y=0;if(!v)return Z();if(z||z!==!1&&v.indexOf(k)===-1){for(var U=v.split(l),M=0;M<U.length;M++){if(_=U[M],y+=_.length,M!==U.length-1)y+=l.length;else if(m)return Z();if(!g||_.substring(0,X)!==g){if(b){if(L=[],le(_.split(i)),ie(),B)return Z()}else le(_.split(i));if(C&&C<=M)return L=L.slice(0,C),Z(!0)}}return Z()}for(var T=v.indexOf(i,y),R=v.indexOf(l,y),ne=new RegExp(fe(A)+fe(k),"g"),E=v.indexOf(k,y);;)if(v[y]===k)for(E=y,y++;;){if((E=v.indexOf(k,E+1))===-1)return m||D.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:L.length,index:y}),re();if(E===N-1)return re(v.substring(y,E).replace(ne,k));if(k===A&&v[E+1]===A)E++;else if(k===A||E===0||v[E-1]!==A){T!==-1&&T<E+1&&(T=v.indexOf(i,E+1));var I=he((R=R!==-1&&R<E+1?v.indexOf(l,E+1):R)===-1?T:Math.min(T,R));if(v.substr(E+1+I,F)===i){_.push(v.substring(y,E).replace(ne,k)),v[y=E+1+I+F]!==k&&(E=v.indexOf(k,y)),T=v.indexOf(i,y),R=v.indexOf(l,y);break}if(I=he(R),v.substring(E+1+I,E+1+I+W)===l){if(_.push(v.substring(y,E).replace(ne,k)),_e(E+1+I+W),T=v.indexOf(i,y),E=v.indexOf(k,y),b&&(ie(),B))return Z();if(C&&L.length>=C)return Z(!0);break}D.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:L.length,index:y}),E++}}else if(g&&_.length===0&&v.substring(y,y+X)===g){if(R===-1)return Z();y=R+W,R=v.indexOf(l,y),T=v.indexOf(i,y)}else if(T!==-1&&(T<R||R===-1))_.push(v.substring(y,T)),y=T+F,T=v.indexOf(i,y);else{if(R===-1)break;if(_.push(v.substring(y,R)),_e(R+W),b&&(ie(),B))return Z();if(C&&L.length>=C)return Z(!0)}return re();function le(q){L.push(q),P=y}function he(q){var $=0;return $=q!==-1&&(q=v.substring(E+1,q))&&q.trim()===""?q.length:$}function re(q){return m||(q===void 0&&(q=v.substring(y)),_.push(q),y=N,le(_),b&&ie()),Z()}function _e(q){y=q,le(_),_=[],R=v.indexOf(l,y)}function Z(q){if(r.header&&!S&&L.length&&!Y){var $=L[0],se={},ke=new Set($);let we=!1;for(let pe=0;pe<$.length;pe++){let oe=$[pe];if(se[oe=O(r.transformHeader)?r.transformHeader(oe,pe):oe]){let ve,Se=se[oe];for(;ve=oe+"_"+Se,Se++,ke.has(ve););ke.add(ve),$[pe]=ve,se[oe]++,we=!0,(Q=Q===null?{}:Q)[ve]=oe}else se[oe]=1,$[pe]=oe;ke.add(oe)}we&&console.warn("Duplicate headers found and renamed."),Y=!0}return{data:L,errors:D,meta:{delimiter:i,linebreak:l,aborted:B,truncated:!!q,cursor:P+(S||0),renamedHeaders:Q}}}function ie(){p(Z()),L=[],D=[]}},this.abort=function(){B=!0},this.getCharIndex=function(){return y}}function te(r){var i=r.data,l=f[i.workerId],g=!1;if(i.error)l.userError(i.error,i.file);else if(i.results&&i.results.data){var p={abort:function(){g=!0,K(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:V,resume:V};if(O(l.userStep)){for(var C=0;C<i.results.data.length&&(l.userStep({data:i.results.data[C],errors:i.results.errors,meta:i.results.meta},p),!g);C++);delete i.results}else O(l.userChunk)&&(l.userChunk(i.results,p,i.file),delete i.results)}i.finished&&!g&&K(i.workerId,i.results)}function K(r,i){var l=f[r];O(l.userComplete)&&l.userComplete(i),l.terminate(),delete f[r]}function V(){throw new Error("Not implemented.")}function G(r){if(typeof r!="object"||r===null)return r;var i,l=Array.isArray(r)?[]:{};for(i in r)l[i]=G(r[i]);return l}function ue(r,i){return function(){r.apply(i,arguments)}}function O(r){return typeof r=="function"}return c.parse=function(r,i){var l=(i=i||{}).dynamicTyping||!1;if(O(l)&&(i.dynamicTypingFunction=l,l={}),i.dynamicTyping=l,i.transform=!!O(i.transform)&&i.transform,!i.worker||!c.WORKERS_SUPPORTED)return l=null,c.NODE_STREAM_INPUT,typeof r=="string"?(r=(g=>g.charCodeAt(0)!==65279?g:g.slice(1))(r),l=new(i.download?w:j)(i)):r.readable===!0&&O(r.read)&&O(r.on)?l=new ce(i):(o.File&&r instanceof File||r instanceof Object)&&(l=new H(i)),l.stream(r);(l=(()=>{var g;return!!c.WORKERS_SUPPORTED&&(g=(()=>{var p=o.URL||o.webkitURL||null,C=n.toString();return c.BLOB_URL||(c.BLOB_URL=p.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(g=new o.Worker(g)).onmessage=te,g.id=h++,f[g.id]=g)})()).userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=O(i.step),i.chunk=O(i.chunk),i.complete=O(i.complete),i.error=O(i.error),delete i.worker,l.postMessage({input:r,config:i,workerId:l.id})},c.unparse=function(r,i){var l=!1,g=!0,p=",",C=`\r
`,z='"',Q=z+z,Y=!1,k=null,A=!1,y=((()=>{if(typeof i=="object"){if(typeof i.delimiter!="string"||c.BAD_DELIMITERS.filter(function(S){return i.delimiter.indexOf(S)!==-1}).length||(p=i.delimiter),typeof i.quotes!="boolean"&&typeof i.quotes!="function"&&!Array.isArray(i.quotes)||(l=i.quotes),typeof i.skipEmptyLines!="boolean"&&typeof i.skipEmptyLines!="string"||(Y=i.skipEmptyLines),typeof i.newline=="string"&&(C=i.newline),typeof i.quoteChar=="string"&&(z=i.quoteChar),typeof i.header=="boolean"&&(g=i.header),Array.isArray(i.columns)){if(i.columns.length===0)throw new Error("Option columns is empty");k=i.columns}i.escapeChar!==void 0&&(Q=i.escapeChar+z),i.escapeFormulae instanceof RegExp?A=i.escapeFormulae:typeof i.escapeFormulae=="boolean"&&i.escapeFormulae&&(A=/^[=+\-@\t\r].*$/)}})(),new RegExp(fe(z),"g"));if(typeof r=="string"&&(r=JSON.parse(r)),Array.isArray(r)){if(!r.length||Array.isArray(r[0]))return B(null,r,Y);if(typeof r[0]=="object")return B(k||Object.keys(r[0]),r,Y)}else if(typeof r=="object")return typeof r.data=="string"&&(r.data=JSON.parse(r.data)),Array.isArray(r.data)&&(r.fields||(r.fields=r.meta&&r.meta.fields||k),r.fields||(r.fields=Array.isArray(r.data[0])?r.fields:typeof r.data[0]=="object"?Object.keys(r.data[0]):[]),Array.isArray(r.data[0])||typeof r.data[0]=="object"||(r.data=[r.data])),B(r.fields||[],r.data||[],Y);throw new Error("Unable to serialize unrecognized input");function B(S,m,N){var F="",W=(typeof S=="string"&&(S=JSON.parse(S)),typeof m=="string"&&(m=JSON.parse(m)),Array.isArray(S)&&0<S.length),X=!Array.isArray(m[0]);if(W&&g){for(var b=0;b<S.length;b++)0<b&&(F+=p),F+=v(S[b],b);0<m.length&&(F+=C)}for(var L=0;L<m.length;L++){var D=(W?S:m[L]).length,_=!1,P=W?Object.keys(m[L]).length===0:m[L].length===0;if(N&&!W&&(_=N==="greedy"?m[L].join("").trim()==="":m[L].length===1&&m[L][0].length===0),N==="greedy"&&W){for(var U=[],M=0;M<D;M++){var T=X?S[M]:M;U.push(m[L][T])}_=U.join("").trim()===""}if(!_){for(var R=0;R<D;R++){0<R&&!P&&(F+=p);var ne=W&&X?S[R]:R;F+=v(m[L][ne],R)}L<m.length-1&&(!N||0<D&&!P)&&(F+=C)}}return F}function v(S,m){var N,F;return S==null?"":S.constructor===Date?JSON.stringify(S).slice(1,25):(F=!1,A&&typeof S=="string"&&A.test(S)&&(S="'"+S,F=!0),N=S.toString().replace(y,Q),(F=F||l===!0||typeof l=="function"&&l(S,m)||Array.isArray(l)&&l[m]||((W,X)=>{for(var b=0;b<X.length;b++)if(-1<W.indexOf(X[b]))return!0;return!1})(N,c.BAD_DELIMITERS)||-1<N.indexOf(p)||N.charAt(0)===" "||N.charAt(N.length-1)===" ")?z+N+z:N)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!a&&!!o.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=ee,c.ParserHandle=ye,c.NetworkStreamer=w,c.FileStreamer=H,c.StringStreamer=j,c.ReadableStreamStreamer=ce,o.jQuery&&((s=o.jQuery).fn.parse=function(r){var i=r.config||{},l=[];return this.each(function(C){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&o.FileReader)||!this.files||this.files.length===0)return!0;for(var z=0;z<this.files.length;z++)l.push({file:this.files[z],inputElem:this,instanceConfig:s.extend({},i)})}),g(),this;function g(){if(l.length===0)O(r.complete)&&r.complete();else{var C,z,Q,Y,k=l[0];if(O(r.before)){var A=r.before(k.file,k.inputElem);if(typeof A=="object"){if(A.action==="abort")return C="AbortError",z=k.file,Q=k.inputElem,Y=A.reason,void(O(r.error)&&r.error({name:C},z,Q,Y));if(A.action==="skip")return void p();typeof A.config=="object"&&(k.instanceConfig=s.extend(k.instanceConfig,A.config))}else if(A==="skip")return void p()}var y=k.instanceConfig.complete;k.instanceConfig.complete=function(B){O(y)&&y(B,k.file,k.inputElem),p()},c.parse(k.file,k.instanceConfig)}}function p(){l.splice(0,1),g()}}),u&&(o.onmessage=function(r){r=r.data,c.WORKER_ID===void 0&&r&&(c.WORKER_ID=r.workerId),typeof r.input=="string"?o.postMessage({workerId:c.WORKER_ID,results:c.parse(r.input,r.config),finished:!0}):(o.File&&r.input instanceof File||r.input instanceof Object)&&(r=c.parse(r.input,r.config))&&o.postMessage({workerId:c.WORKER_ID,results:r,finished:!0})}),(w.prototype=Object.create(x.prototype)).constructor=w,(H.prototype=Object.create(x.prototype)).constructor=H,(j.prototype=Object.create(j.prototype)).constructor=j,(ce.prototype=Object.create(x.prototype)).constructor=ce,c})}(Ee)),Ee.exports}var ct=lt();const ft=Fe(ct),vt=async({url:e,setIsLoading:t,setError:n,setHeaders:o,setCsvData:s})=>{if(e){t(!0),n(null);try{const a=await fetch(e);if(!a.ok)throw new Error(`Failed to fetch CSV: ${a.status}`);const u=await a.text();ft.parse(u,{complete:f=>{const h=f.data;h.length>0&&(o(h[0]),s(h)),t(!1)},error:f=>{n(`Error parsing CSV: ${f.message}`),t(!1)}})}catch(a){n(`Error fetching CSV: ${a instanceof Error?a.message:String(a)}`),t(!1)}}},Et=({data:e,latField:t,lngField:n,nameField:o,descField:s})=>({type:"FeatureCollection",features:e.map(h=>{const c=parseFloat(h[t]),x=parseFloat(h[n]);return isNaN(c)||isNaN(x)?null:{type:"Feature",geometry:{type:"Point",coordinates:[x,c]},properties:{name:o?h[o]:"",description:s?h[s]:""}}}).filter(h=>h!==null)});export{yt as L,_t as M,gt as N,pt as P,mt as S,ht as a,vt as f,Et as g};
